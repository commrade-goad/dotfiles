# VARIABLES
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $term foot
set $wmenu_command wmenu-run -bi -f "Iosevka Nerd Font Mono 12" -N 2D353B -n D3C6AA -S A7C080 -s 2D353B -M A7C080 -m 2D353B
# set $menu $wmenu_command | xargs swaymsg exec --
set $menu $wmenu_command
set $wallpaper_path ~/Downloads/fog_forest_1.png
set $screenlock swaylock -f -i $wallpaper_path -s fill

seat seat0 xcursor_theme Adwaita 24

exec export TERM=foot
exec export TERMINAL=foot
exec export QT_QPA_PLATFORMTHEME=qt6ct
exec "wl-gammactl -c 0.935 -b 0.998 -g 0.806"
# exec /usr/lib/polkit-kde-authentication-agent-1
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway
exec pipewire
exec xdg-desktop-portal
exec xdg-desktop-portal-wlr
exec dunst
exec playerctld
exec copyq
exec copyq config hide_main_window true
exec battrem
exec "sleep 2 && sway-audio-idle-inhibit"
exec swayidle -w \
         before-sleep 'playerctl pause'\
         before-sleep '$screenlock'\
         timeout 300 '$screenlock' \
         timeout 360 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
         timeout 420 'loginctl suspend'

input * xkb_numlock enable
input * repeat_delay 300
input * repeat_rate 25
input "1739:52545:SYNA7DB5:01_06CB:CD41_Touchpad" {
    dwt disable
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
    pointer_accel 0.05
}
input "10077:2982:USB_OPTICAL_MOUSE" {
    dwt disable
    accel_profile "flat"
}
input * xkb_options compose:rctrl

input "type:keyboard" {
    xkb_options caps:escape
}
# input "type:Mouse" {
#     dwt disable
#     accel_profile "flat"
# }

output * bg $wallpaper_path fill
output HDMI-A-1 resolution 1920x1080 position 1920,0
# output eDP-1 color_profile icc ~/.local/share/icc/edid-41658b2e28b3d672ecf504bb4e482602.icc
output eDP-1 allow_tearing yes
output eDP-1 max_render_time off
output * adaptive_sync on

workspace 10 output HDMI-A-1
workspace 9 output HDMI-A-1

## If wine app has a problem
#exec_always xrandr --output XWAYLAND0 --primary
#exec_always xrandr --output $(xrandr | grep -m 1 XWAYLAND | awk '{print $1;}') --primary
# You can get the names of your outputs by running: swaymsg -t get_outputs

bindsym $mod+Shift+v exec copyq toggle
bindsym $mod+Period exec ~/.local/share/bin/sway-emoji
bindsym $mod+Equal exec ~/.local/share/bin/woomer
bindsym $mod+n exec dunstify "TODO: Program broke for this fix later."
bindsym $mod+Return exec $term
bindsym $mod+Shift+q kill
bindsym $mod+d exec $menu
bindsym $mod+Shift+r reload
bindsym $mod+Shift+c exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

bindsym --locked XF86MonBrightnessDown exec ~/.local/share/bin/brightnessctl-wrapper lower
bindsym --locked XF86MonBrightnessUp exec ~/.local/share/bin/brightnessctl-wrapper raise
bindsym --locked XF86AudioMute exec ~/.local/share/bin/pamixer-wrapper toggle
bindsym --locked XF86AudioRaiseVolume exec ~/.local/share/bin/pamixer-wrapper raise
bindsym --locked XF86AudioLowerVolume exec ~/.local/share/bin/pamixer-wrapper lower
bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym --locked XF86AudioNext exec playerctl next
bindsym --locked XF86AudioPrev exec playerctl previous
bindsym --to-code $mod+x mode $master
bindsym --locked $mod+Shift+p exec playerctl play-pause
bindsym $mod+Shift+w sticky toggle

bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

bindsym $mod+b splith
bindsym $mod+v splitv

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+f fullscreen
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent

bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

bindsym --release Print exec "grim - | wl-copy"
bindsym --release $mod+Print exec "grim"
bindsym $mod+Shift+s exec grim -g "$(slurp)" - | wl-copy
bindsym $mod+Ctrl+s exec grim -g "$(slurp)"

bindsym $mod+Shift+n exec foot -e nvim

bindgesture swipe:right workspace prev
bindgesture swipe:left workspace next
bindgesture swipe:3:up scratchpad show
bindgesture swipe:3:down move scratchpad

floating_modifier $mod normal

set $master "[s]leep,[p]oweroff,[r]eboot,[l]ogout,l[o]ck"
mode "$master" {
    bindsym s exec $screenlock && loginctl suspend, mode "default"
    bindsym p exec loginctl poweroff, mode "default"
    bindsym r exec loginctl reboot, mode "default"
    bindsym l exec swaymsg exit
    bindsym o exec $screenlock, mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+x mode "default"
}

mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# smart_gaps on
default_border pixel 2
gaps inner 0

for_window [class=.*] inhibit_idle fullscreen
for_window [app_id=.*] inhibit_idle fullscreen
for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable
for_window [window_role="task_dialog|bubble|page-info|Preferences|pop-up"] floating enable
for_window [window_role="Open Files"] floating enable sticky
for_window [window_role="File Operation Progress"] floating enable sticky
for_window [window_role="Save As"] floating enable
for_window [class="qBittorrent" window_role="pop-up"] floating enable
for_window [class="mtp-ng-qt" window_role="Open"] floating enable
for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable
for_window [class=".*.exe"] floating enable, max_render_time off
for_window [app_id="pavucontrol"] sticky enable, floating enable
for_window [class="Steam"] floating enable, max_render_time off
for_window [class="firefox"] max_render_time off
for_window [app_id="firefox"] max_render_time off
for_window [title=".*Winetricks"] floating enable
for_window [app_id="firefox" title="^Picture-in-Picture$"] floating enable, sticky enable
for_window [app_id="mpv"] inhibit_idle visible, max_render_time off, floating enable
for_window [title=".*QjackCtl"] floating enable
for_window [class="Minecraft Launcher"] floating enable
for_window [class="Minecraft"] floating enable, max_render_time off
for_window [app_id="minecraft-launcher"] floating enable
for_window [app_id="copyq"] floating enable
for_window [title="Firefox.*Sharing Indicator"] floating enable, move position 1600 0, border none, nofocus
for_window [title="^Library$" app_id="firefox.*"] floating enable
for_window [urgent="latest" app_id="firefox.*"] focus
for_window [app_id="xdg-desktop-portal-gtk" title=".*"] floating enable
for_window [title="(?:Open|Save) (?:File|Folder|As)"] floating enable
for_window [title="Choose Files"] floating enable
for_window [app_id="org.gnome.Calculator"] border none, floating enable
for_window [app_id="org.kde.polkit-kde-authentication-agent-1"] floating enable
for_window [app_id="brave-browser"] floating disable
for_window [title="Picture in Picture"] floating enable, sticky enable
for_window [app_id="calendar-dialog"] floating enable
for_window [app_id="nmtui-dialog"] floating enable
for_window [app_id="rmon-dialog"] floating enable
for_window [title="File Operation Progress" app_id="thunar"] floating enable
# for_window [app_id="" title=""] floating enable

include active-theme

bar {
    position top
    separator_symbol " :: "
    # gaps 5 5

    workspace_min_width 35
    pango_markup enabled

    status_command ~/.config/sway/status.py

    colors {
        background         #2B3339
        statusline         #A7C080
        inactive_workspace #2B3339 #2B3339 #5C6A72
        focused_workspace  #A7C080 #A7C080 #323232
        urgent_workspace   #E67E80 #E67E80 #323232
        binding_mode       #A7C080 #A7C080 #323232
    }
}

client.focused           $green       $base $text       $green      $green
client.focused_inactive  $overlay1    $base $overlay1   $overlay1   $overlay1
client.unfocused         $overlay1    $base $overlay1   $overlay1   $overlay1
client.urgent            $red         $base $red        $red        $red
client.placeholder       $overlay0    $base $text       $overlay0   $overlay0
client.background        $base

font pango:Iosevka Nerd Font Mono 11
