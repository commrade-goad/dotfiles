#!/usr/bin/env bash

TITLE_MAX_LENGTH=20
ARTIST_MAX_LENGTH=15

empty="No media"

status=$(playerctl status 2> /dev/null)
status_stat=$?

if [ $status_stat -eq 1 ]; then
    echo -n "$empty"
    exit
fi

title=$(playerctl metadata xesam:title 2> /dev/null)
artist=$(playerctl metadata xesam:artist 2> /dev/null)

title=$(echo "$title" | awk -v len="$TITLE_MAX_LENGTH" '{print substr($0, 1, len)}')
artist=$(echo "$artist" | awk -v len="$ARTIST_MAX_LENGTH" '{print substr($0, 1, len)}')

status_msg="[$status] "

msg="$status_msg $title - $artist"

echo -n "$msg"
